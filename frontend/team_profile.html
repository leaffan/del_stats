<div class="container" data-ng-app="delStatsApp">
    <div class="alert alert-info main-bg shadow">
        <div class="inline-headers">
            <div class="d-none d-md-block">
                <span><img class="img-fluid" src="https://www.del.org/assets/img/teams/team_{{::current_team}}.png" alt="Team logo" width="40" height="40"/></span>
                    <h2 class="ml-3">{{ ::team_full_name_lookup[current_team] }} {{ ::season }}/{{ ::svc.parseFloat(season) + 1 - 2000 }}</h2>
            </div>
            <div class="d-md-none">
                <h3 class="medium">{{ ::team_full_name_lookup[current_team] }}</h3>
                <b>{{ ::season }}/{{ ::svc.parseFloat(season) + 1 - 2000 }}</b>
            </div>
        </div>
    </div>
        
    <div class="alert alert-info main-bg shadow">
        <a href="#!/team_stats/{{::season}}"><b>Teamstatistiken</b></a> | <a href="#!/del_stats/{{::season}}"><b>Spielerstatistiken</b></a> | <a href="#!"><b>Startseite</b></a>
    </div>
    
    <div class="alert alert-info main-bg shadow">
        <span data-ng-click="toggle=!toggle"><b>Abkürzungsverzeichnis&#32;&#32;<span data-ng-show="toggle" class="fa fa-minus"></span><span data-ng-show="!toggle" class="fa fa-plus"></span></b></span>
            <dl data-ng-show="toggle" class="row mx-2">
                <dt class="col-md-2 text-right" data-ng-repeat-start="term in stats_cols[tableSelect] | filter:{expl_de: '!!'}">{{ term.col_header }}</dt>
                <dd class="col-md-10" data-ng-repeat-end><i>{{ term.expl_en }}:</i> {{ term.expl_de }}</dd>
            </dl>
    </div>

    <form>
        <!-- desktop / tablet version -->
        <div class="d-none d-md-block">
            <div class="form-row mb-1">
                <div class="input-group col-6">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Team:</span>
                    </div>
                    <select class="form-control" id="team_select" data-ng-model="current_team" data-ng-change="changeTeam()">
                        <option data-ng-option data-ng-repeat="team in teams" value="{{team.abbr}}">{{team.full_name}}</option>
                    </select>
                </div>
                <div class="input-group col-6 pl-0">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Saisonphase:</span>
                    </div>
                    <select class="form-control" data-ng-model="seasonTypeFilter" data-ng-change="changeTable()">
                        <option data-ng-if="season == 2020" data-ng-option value="MSC">MagentaSport Cup</option>
                        <option data-ng-option value="RS">Hauptrunde</option>
                        <option data-ng-option value="PO">Playoffs</option>
                        <option data-ng-if="season != 2020" data-ng-option value="">Hauptrunde und Playoffs</option>
                    </select>
                </div>
            </div>

            <div class="form-row mb-1">
                <div class="input-group col-5">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Thema:</span>
                    </div>
                    <select class="form-control" id="table_select" data-ng-model="tableSelect" data-ng-change="changeTable()">
                        <option data-ng-option value="basic_game_by_game">Basisdaten</option>
                        <option data-ng-option value="game_goals">Torstatistiken</option>
                        <option data-ng-option value="game_shots">Schussstatistiken</option>
                        <option data-ng-option value="shot_zones">Schusszonen (alle Schüsse)</option>
                        <option data-ng-option value="shot_on_goal_zones">Schusszonen (Torschüsse)</option>
                        <option data-ng-option value="shot_zones_against">Schusszonen des Gegners (alle Schüsse)</option>
                        <option data-ng-option value="shot_on_goal_zones_against">Schusszonen des Gegners (Torschüsse)</option>
                        <option data-ng-option value="special_team_stats">Über-/Unterzahlstatistiken</option>
                        <option data-ng-option value="game_additional_stats">Zusätzliche Statistiken</option>
                        <option data-ng-option value="score_states">Zeiten pro Spielstand</option>
                        <option data-ng-option value="shootout_stats">Penaltyschießen</option>
                        <option data-ng-option value="game_refs">Schieds-/Linienrichter</option>
                        <option data-ng-option value="development">Entwicklung im Saisonverlauf</option>
                    </select>
                </div>
                <div class="input-group col-3 pl-0">
                    <select class="form-control" id="home_road_select" data-ng-model="homeRoadFilter">
                        <option data-ng-option value selected="selected">Heim-/Auswärtsspiele</option>
                        <option data-ng-option value="home">Heimspiele</option>
                        <option data-ng-option value="road">Auswärtsspiele</option>
                    </select>
                </div>
                <div class="input-group col-4 pl-0">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Gegner:</span>
                    </div>
                    <select class="form-control" id="opp_select" data-ng-model="oppFilter">
                        <option data-ng-option value selected="selected">alle</option>
                        <option data-ng-option data-ng-repeat="team in teams | filter:{abbr: '!' + current_team}" value="{{team.abbr}}">{{team.full_name}}</option>
                    </select>
                </div>
            </div>

            <div class="form-row mb-3">
                <div class="input-group col-4">
                    <select class="form-control" data-ng-model="timespanSelect" data-ng-change="changeTimespan()">
                        <option data-ng-option value selected="selected">alle Zeiträume</option>
                        <option data-ng-option data-ng-repeat="month in monthsPlayed" value="{{month}}">{{svc.germanMonths()[month]}}</option>
                        <option data-ng-if="season != 2020" data-ng-option>-----------</option>
                        <option data-ng-if="season != 2020" data-ng-option value="pre_dcup">Vor Deutschland Cup</option>
                        <option data-ng-if="season != 2020" data-ng-option value="post_dcup">Nach Deutschland Cup</option>
                    </select>
                </div>
                <div class="input-group col-2 pl-0">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                    </div>
                    <input class="form-control" placeholder="Anfangsdatum" moment-picker="ctrl.stringFromDate" format="DD.MM.YYYY"
                    data-ng-model="ctrl.fromDate" data-ng-model-options="{ updateOn: 'blur' }">
                </div>
                <div class="input-group col-2 pl-0">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                    </div>
                    <input class="form-control" placeholder="Enddatum" moment-picker="ctrl.stringToDate" format="DD.MM.YYYY"
                    data-ng-model="ctrl.toDate" data-ng-model-options="{ updateOn: 'blur' }">
                </div>
                <div class="input-group col-2 pl-0">
                    <div class="input-group-prepend">
                        <span class="input-group-text">von</span>
                    </div>
                    <select class="form-control" id="from_round_select" data-ng-model="fromRoundSelect">
                        <option data-ng-option data-ng-repeat="round in svc.range(1, maxRoundPlayed)" value="{{round}}">Spieltag {{round}}</option>
                    </select>
                </div>
                <div class="input-group col-2 pl-0">
                    <div class="input-group-prepend">
                        <span class="input-group-text">bis</span>
                    </div>
                    <select class="form-control" id="to_round_select" data-ng-model="toRoundSelect">
                        <option data-ng-option data-ng-repeat="round in svc.range(1, maxRoundPlayed)" value="{{round}}">Spieltag {{round}}</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- mobile version -->
        <div class="d-md-none">
            <div class="form_group mb-1">
                <div class="w-auto input-group">
                    <div class="w-25 input-group-prepend">
                        <span class="w-100 input-group-text">Team:</span>
                    </div>
                    <select class="w-75 form-control" data-ng-model="current_team" data-ng-change="changeTeam()">
                        <option data-ng-option data-ng-repeat="team in teams" value="{{team.abbr}}">{{team.full_name}}</option>
                    </select>
                </div>
            </div>

            <div class="form-group mb-1 d-md-none">
                <div class="input-group">
                    <div class="w-25 input-group-prepend">
                        <span class="w-100 input-group-text">Thema:</span>
                    </div>
                    <select class="w-75 form-control" data-ng-model="tableSelect" data-ng-change="changeTable()">
                        <option data-ng-option value="basic_game_by_game">Basisdaten</option>
                        <option data-ng-option value="game_goals">Torstatistiken</option>
                        <option data-ng-option value="game_shots">Schussstatistiken</option>
                        <option data-ng-option value="shot_zones">Schusszonen (alle Schüsse)</option>
                        <option data-ng-option value="shot_on_goal_zones">Schusszonen (Torschüsse)</option>
                        <option data-ng-option value="shot_zones_against">Schusszonen des Gegners (alle Schüsse)</option>
                        <option data-ng-option value="shot_on_goal_zones_against">Schusszonen des Gegners (Torschüsse)</option>
                        <option data-ng-option value="special_team_stats">Über-/Unterzahlstatistiken</option>
                        <option data-ng-option value="game_additional_stats">Zusätzliche Statistiken</option>
                        <option data-ng-option value="score_states">Zeiten pro Spielstand</option>
                        <option data-ng-option value="game_refs">Schieds-/Linienrichter</option>
                        <option data-ng-option value="development">Entwicklung im Saisonverlauf</option>
                    </select>
                </div>
            </div>

            <div class="form_group mb-1">
                <div class="w-auto input-group">
                    <div class="w-35 input-group-prepend">
                        <span class="w-100 input-group-text">Saisonphase:</span>
                    </div>
                    <select class="w-65 form-control" data-ng-model="seasonTypeFilter" data-ng-change="changeTable()">
                        <option data-ng-option value="MSC">MagentaSport Cup</option>
                        <option data-ng-option value="RS">Hauptrunde</option>
                        <option data-ng-option value="PO">Playoffs</option>
                        <option data-ng-if="season != 2020" data-ng-option value="">Hauptrunde und Playoffs</option>
                    </select>
                </div>
            </div>

            <div class="form_group mb-1">
                <div class="w-auto input-group">
                    <select class="form-control" data-ng-model="homeRoadFilter">
                        <option data-ng-option value selected="selected">Heim-/Auswärtsspiele</option>
                        <option data-ng-option value="home">Heimspiele</option>
                        <option data-ng-option value="road">Auswärtsspiele</option>
                    </select>
                </div>
            </div>
            <div class="form_group mb-1">
                <div class="w-auto input-group">
                    <div class="w-25 input-group-prepend">
                        <span class="w-100 input-group-text">Gegner:</span>
                    </div>
                    <select class="w-75 form-control" data-ng-model="oppFilter">
                        <option data-ng-option value selected="selected">alle</option>
                        <option data-ng-option data-ng-repeat="team in teams | filter:{abbr: '!' + current_team}" value="{{team.abbr}}">{{team.full_name}}</option>
                    </select>
                </div>
            </div>
            <div class="form-group mb-1">
                <div class="w-auto input-group">
                    <select class="form-control" data-ng-model="timespanSelect" data-ng-change="changeTimespan()">
                        <option data-ng-option value selected="selected">alle Zeiträume</option>
                        <option data-ng-option data-ng-repeat="month in monthsPlayed" value="{{month}}">{{svc.germanMonths()[month]}}</option>
                        <option data-ng-option>-----------</option>
                        <option data-ng-option value="pre_dcup">Vor Deutschland Cup</option>
                        <option data-ng-option value="post_dcup">Nach Deutschland Cup</option>
                    </select>
                </div>
            </div>
            <div class="form-row mb-1">
                <div class="input-group col-6">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                    </div>
                    <input class="form-control" placeholder="Anfangsdatum" moment-picker="ctrl.stringFromDate" format="DD.MM.YYYY"
                    data-ng-model="ctrl.fromDate" data-ng-model-options="{ updateOn: 'blur' }">
                </div>
                <div class="input-group col-6 pl-0">
                    <div class="input-group-prepend">
                        <span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
                    </div>
                    <input class="form-control" placeholder="Enddatum" moment-picker="ctrl.stringToDate" format="DD.MM.YYYY"
                    data-ng-model="ctrl.toDate" data-ng-model-options="{ updateOn: 'blur' }">
                </div>
            </div>
            <div class="form-row mb-3">
                <div class="input-group col-6">
                    <div class="input-group-prepend">
                        <span class="input-group-text">von</span>
                    </div>
                    <select class="form-control" data-ng-model="fromRoundSelect">
                        <option data-ng-option data-ng-repeat="round in svc.range(1, maxRoundPlayed)" value="{{round}}">Spieltag {{round}}</option>
                    </select>
                </div>
                <div class="input-group col-6 pl-0">
                    <div class="input-group-prepend">
                        <span class="input-group-text">bis</span>
                    </div>
                    <select class="form-control" data-ng-model="toRoundSelect">
                        <option data-ng-option data-ng-repeat="round in svc.range(1, maxRoundPlayed)" value="{{round}}">Spieltag {{round}}</option>
                    </select>
                </div>
            </div>
        </div>
    </form>

    <table id="game_additional_stats" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'game_additional_stats'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter: dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-10 text-right">{{ game.faceoffs }}</td>
                <td class="w-10 text-right">{{ game.faceoffs_won }}</td>
                <td class="w-10 text-right">{{ game.faceoffs_lost }}</td>
                <td class="w-12 text-right">{{ game.faceoff_pctg.toFixed(2) }} %</td>
                <td class="w-12 text-right">{{ game.shot_pctg.toFixed(2) }} %</td>
                <td class="w-12 text-right">{{ game.save_pctg.toFixed(2) }} %</td>
                <td class="w-10 text-right">{{ game.pdo.toFixed(1) }}</td>
            </tr>

            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ faceoffs_total = svc.getFilteredTotal(filtered_game_log, 'faceoffs', game_log) }} ({{ (faceoffs_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ faceoffs_won_total = svc.getFilteredTotal(filtered_game_log, 'faceoffs_won', game_log) }} ({{ (faceoffs_won_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ faceoffs_lost_total = svc.getFilteredTotal(filtered_game_log, 'faceoffs_lost', game_log) }} ({{ (faceoffs_lost_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ ((faceoffs_won_total / faceoffs_total) * 100).toFixed(2) }} %</b></td>
                <td class="text-right"><b>{{ (shot_pctg_total = (svc.getFilteredTotal(filtered_game_log, 'goals', game_log) / svc.getFilteredTotal(filtered_game_log, 'shots_on_goal', game_log)) * 100).toFixed(2) }} %</b></td>
                <td class="text-right"><b>{{ (save_pctg_total = 100 - (svc.getFilteredTotal(filtered_game_log, 'opp_goals', game_log) / svc.getFilteredTotal(filtered_game_log, 'opp_shots_on_goal', game_log)) * 100).toFixed(2) }} %</b></td>
                <td class="text-right"><b>{{ (shot_pctg_total + save_pctg_total).toFixed(1) }}</b></td>
            </tr>
        </tbody>
    </table>

    <table id="game_shots" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'game_shots'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-10 text-right">{{ game.shots_on_goal }}</td>
                <td class="w-09 text-right">{{ game.shots_missed }}</td>
                <td class="w-09 text-right">{{ game.shots_blocked }}</td>
                <td class="w-10 text-right">{{ game.shot_pctg.toFixed(2) }} %</td>
                <td class="w-10 text-right">{{ game.opp_shots_on_goal }}</td>
                <td class="w-09 text-right">{{ game.opp_shots_missed }}</td>
                <td class="w-09 text-right">{{ game.opp_shots_blocked }}</td>
                <td class="w-10 text-right">{{ game.opp_shot_pctg.toFixed(2) }} %</td>
            </tr>

            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ shots_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'shots_on_goal', game_log) }} ({{ (shots_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ shots_missed_total = svc.getFilteredTotal(filtered_game_log, 'shots_missed', game_log) }} ({{ (shots_missed_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ shots_blocked_total = svc.getFilteredTotal(filtered_game_log, 'shots_blocked', game_log) }} ({{ (shots_blocked_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ ((svc.getFilteredTotal(filtered_game_log, 'goals', game_log) / shots_on_goal_total) * 100).toFixed(2) }} %</b></td>
                <td class="text-right"><b>{{ opp_shots_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'opp_shots_on_goal', game_log) }} ({{ (opp_shots_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ opp_shots_missed_total = svc.getFilteredTotal(filtered_game_log, 'opp_shots_missed', game_log) }} ({{ (opp_shots_missed_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ opp_shots_blocked_total = svc.getFilteredTotal(filtered_game_log, 'opp_shots_blocked', game_log) }} ({{ (opp_shots_blocked_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ ((svc.getFilteredTotal(filtered_game_log, 'opp_goals', game_log) / opp_shots_on_goal_total) * 100).toFixed(2) }} %</b></td>
            </tr>
        </tbody>
    </table>

    <table id="game_goals" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'game_goals'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-09 text-right">{{ game.goals_1 }}</td>
                <td class="w-10 text-right">{{ game.opp_goals_1 }}</td>
                <td class="w-09 text-right">{{ game.goals_2 }}</td>
                <td class="w-10 text-right">{{ game.opp_goals_2 }}</td>
                <td class="w-09 text-right">{{ game.goals_3 }}</td>
                <td class="w-10 text-right">{{ game.opp_goals_3 }}</td>
                <td class="w-09 text-right">{{ game.goals }}</td>
                <td class="w-10 text-right">{{ game.opp_goals }}</td>
            </tr>

            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ goals_1_total = svc.getFilteredTotal(filtered_game_log, 'goals_1', game_log) }} ({{ (goals_1_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ opp_goals_1_total = svc.getFilteredTotal(filtered_game_log, 'opp_goals_1', game_log) }} ({{ (opp_goals_1_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ goals_2_total = svc.getFilteredTotal(filtered_game_log, 'goals_2', game_log) }} ({{ (goals_2_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ opp_goals_2_total = svc.getFilteredTotal(filtered_game_log, 'opp_goals_2', game_log) }} ({{ (opp_goals_2_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ goals_3_total = svc.getFilteredTotal(filtered_game_log, 'goals_3', game_log) }} ({{ (goals_3_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ opp_goals_3_total = svc.getFilteredTotal(filtered_game_log, 'opp_goals_3', game_log) }} ({{ (opp_goals_3_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ goals_total = svc.getFilteredTotal(filtered_game_log, 'goals', game_log) }} ({{ (goals_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ opp_goals_total = svc.getFilteredTotal(filtered_game_log, 'opp_goals', game_log) }} ({{ (opp_goals_total / filtered_game_log.length).toFixed(1) }})</b></td>
            </tr>
        </tbody>
    </table>

    <table id="game_refs" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'game_refs'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-15">{{ game.ref_1 }}</td>
                <td class="w-15">{{ game.ref_2 }}</td>
                <td class="w-15">{{ game.lma_1 }}</td>
                <td class="w-15">{{ game.lma_2 }}</td>
                <td class="w-08 text-right">{{ game.pim }}</td>
                <td class="w-08 text-right">{{ game.opp_pim }}</td>
            </tr>

            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td class="text-right"><b>{{ pim_total = svc.getFilteredTotal(filtered_game_log, 'pim', game_log) }} ({{ (pim_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ opp_pim_total = svc.getFilteredTotal(filtered_game_log, 'opp_pim', game_log) }} ({{ (opp_pim_total / filtered_game_log.length).toFixed(1) }})</b></td>
            </tr>
        </tbody>
    </table>

    <table id="basic_game_by_game" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'basic_game_by_game'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center">
                    <a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">
                        <span class="d-none d-lg-block">{{ game.game_date }}</span>
                        <span class="d-lg-none">{{ game.game_date.slice(5) }}</span>
                    </a>
                </td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-18">{{ game.arena }}</td>
                <td class="w-08 text-right">{{ game.attendance }}</td>
                <td class="w-11">{{ svc.shortenName(game.coach) }}</td>
                <td class="w-11">{{ svc.shortenName(game.opp_coach) }}</td>
                <td class="w-14"><a href="#!/player_profile/{{season}}/{{game.team}}/{{game.best_plr_id}}">{{ svc.shortenName(game.best_plr) }}</a></td>
                <td class="w-14"><a href="#!/player_profile/{{season}}/{{game.opp_team}}/{{game.opp_best_plr_id}}">{{ svc.shortenName(game.opp_best_plr) }}</a></td>
            </tr>

            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class=" text-right" ><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td></td>
                <td class="text-right"><b>{{ attendance_total = svc.getFilteredTotal(filtered_game_log, 'attendance', game_log) }}</b></td>
                <td class="text-right"><b>&#216;: {{ (attendance_total / filtered_game_log.length).toFixed(0) }}</b></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </tbody>
    </table>

    <table id="special_team_stats" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'special_team_stats'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-11 text-right">{{ svc.formatTime(game.pp_time) }}</td>
                <td class="w-08 text-right">{{ game.pp_opps }}</td>
                <td class="w-08 text-right">{{ game.pp_goals }}</td>
                <td class="w-08 text-right">{{ game.pp_pctg.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.opp_sh_goals }}</td>
                <td class="w-08 text-right">{{ svc.formatTime(game.opp_pp_time) }}</td>
                <td class="w-08 text-right">{{ game.opp_pp_opps }}</td>
                <td class="w-08 text-right">{{ game.opp_pp_goals }}</td>
                <td class="w-08 text-right">{{ game.pk_pctg.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.sh_goals }}</td>
            </tr>

            <tr class="table-secondary">
                <td>Gesamt:</td>
                <td><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ svc.formatTime(svc.getFilteredTotal(filtered_game_log, 'pp_time', 'game_log')) }}</b></td>
                <td class="text-right"><b>{{ total_pp_opps = svc.getFilteredTotal(filtered_game_log, 'pp_opps', 'game_log') }}</b></td>
                <td class="text-right"><b>{{ total_pp_goals = svc.getFilteredTotal(filtered_game_log, 'pp_goals', 'game_log') }}</b></td>
                <td class="text-right"><b>{{ (total_pp_goals / total_pp_opps * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ svc.getFilteredTotal(filtered_game_log, 'opp_sh_goals', 'game_log') }}</b></td>
                <td class="text-right"><b>{{ svc.formatTime(svc.getFilteredTotal(filtered_game_log, 'opp_pp_time', 'game_log')) }}</b></td>
                <td class="text-right"><b>{{ total_opp_pp_opps = svc.getFilteredTotal(filtered_game_log, 'opp_pp_opps', 'game_log') }}</b></td>
                <td class="text-right"><b>{{ total_opp_pp_goals = svc.getFilteredTotal(filtered_game_log, 'opp_pp_goals', 'game_log') }}</b></td>
                <td class="text-right"><b>{{ (100 - total_opp_pp_goals / total_opp_pp_opps * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ svc.getFilteredTotal(filtered_game_log, 'sh_goals', 'game_log') }}</b></td>
            </tr>
        </tbody>
    </table>

    <table id="development" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'development'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                    <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:game_date:true | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-04 text-right">
                    {{ homeRoadFilter || oppFilter ? '--' : getStandingsPositionThroughDate(game.game_date) }}
                </td>
                <td class="w-09 text-right">
                    {{ svc.getFilteredAccumulatedTotal(filtered_game_log, 'points', game_log, game.game_date) }}
                </td>
                <td class="w-09 text-right">
                    {{ ((svc.getFilteredAccumulatedTotal(filtered_game_log, 'pp_goals', game_log, game.game_date) / svc.getFilteredAccumulatedTotal(filtered_game_log, 'pp_opps', game_log, game.game_date)) * 100).toFixed(2) }} %
                </td>
                <td class="w-09 text-right">
                    {{ ((1 - svc.getFilteredAccumulatedTotal(filtered_game_log, 'opp_pp_goals', game_log, game.game_date) / svc.getFilteredAccumulatedTotal(filtered_game_log, 'sh_opps', game_log, game.game_date)) * 100).toFixed(2) }} %
                </td>
                <td class="w-09 text-right">
                    {{ shot_pctg = (svc.getFilteredAccumulatedTotal(filtered_game_log, 'goals', game_log, game.game_date) / svc.getFilteredAccumulatedTotal(filtered_game_log, 'shots_on_goal', game_log, game.game_date) * 100).toFixed(2) }} %
                </td>
                <td class="w-09 text-right">
                    {{ save_pctg = ((1 - svc.getFilteredAccumulatedTotal(filtered_game_log, 'opp_goals', game_log, game.game_date) / svc.getFilteredAccumulatedTotal(filtered_game_log, 'opp_shots_on_goal', game_log, game.game_date)) * 100).toFixed(2)  }} %
                </td>
                <td class="w-09 text-right">
                    {{ (svc.parseFloat(shot_pctg) + svc.parseFloat(save_pctg)).toFixed(1) }}
                </td>
                <td class="w-09 text-right">
                    {{ svc.getFilteredAccumulatedTotal(filtered_game_log, 'score', game_log, game.game_date) }}
                </td>
                <td class="w-09 text-right">
                    {{ svc.getFilteredAccumulatedTotal(filtered_game_log, 'opp_score', game_log, game.game_date) }}
                </td>
            </tr>
        </tbody>
    </table>

    <table id="shot_zones" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'shot_zones'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-08 text-right">{{ game.shots }}</td>
                <td class="w-08 text-right">{{ game.sl_sh }}</td>
                <td class="w-09 text-right">{{ game.sl_p.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.lf_sh }}</td>
                <td class="w-09 text-right">{{ game.lf_p.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.rg_sh }}</td>
                <td class="w-09 text-right">{{ game.rg_p.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.bl_sh }}</td>
                <td class="w-09 text-right">{{ game.bl_p.toFixed(1) }} %</td>
            </tr>

            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ shots_total = svc.getFilteredTotal(filtered_game_log, 'shots', game_log) }} ({{ (shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ sl_shots_total = svc.getFilteredTotal(filtered_game_log, 'sl_sh', game_log) }} ({{ (sl_shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ sl_shots_pctg_total = ((sl_shots_total / shots_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ lf_shots_total = svc.getFilteredTotal(filtered_game_log, 'lf_sh', game_log) }} ({{ (lf_shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ lf_shots_pctg_total = ((lf_shots_total / shots_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ rg_shots_total = svc.getFilteredTotal(filtered_game_log, 'rg_sh', game_log) }} ({{ (rg_shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ rg_shots_pctg_total = ((rg_shots_total / shots_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ bl_shots_total = svc.getFilteredTotal(filtered_game_log, 'bl_sh', game_log) }} ({{ (bl_shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ bl_shots_pctg_total = ((bl_shots_total / shots_total) * 100).toFixed(1) }} %</b></td>
            </tr>
        </tbody>
    </table>

    <table id="shot_on_goal_zones" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'shot_on_goal_zones'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-08 text-right">{{ game.shots_on_goal }}</td>
                <td class="w-08 text-right">{{ game.sl_og }}</td>
                <td class="w-09 text-right">{{ game.sl_og_p.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.lf_og }}</td>
                <td class="w-09 text-right">{{ game.lf_og_p.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.rg_og }}</td>
                <td class="w-09 text-right">{{ game.rg_og_p.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.bl_og }}</td>
                <td class="w-09 text-right">{{ game.bl_og_p.toFixed(1) }} %</td>
            </tr>

            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ shots_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'shots_on_goal', game_log) }} ({{ (shots_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ sl_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'sl_og', game_log) }} ({{ (sl_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ sl_on_goal_pctg_total = ((sl_on_goal_total / shots_on_goal_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ lf_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'lf_og', game_log) }} ({{ (lf_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ lf_on_goal_pctg_total = ((lf_on_goal_total / shots_on_goal_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ rg_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'rg_og', game_log) }} ({{ (rg_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ rg_on_goal_pctg_total = ((rg_on_goal_total / shots_on_goal_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ bl_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'bl_og', game_log) }} ({{ (bl_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ bl_on_goal_pctg_total = ((bl_on_goal_total / shots_on_goal_total) * 100).toFixed(1) }} %</b></td>
            </tr>
        </tbody>
    </table>

    <table id="shot_zones_against" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'shot_zones_against'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-08 text-right">{{ game.opp_shots }}</td>
                <td class="w-08 text-right">{{ game.sl_sh_a }}</td>
                <td class="w-09 text-right">{{ game.sl_p_a.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.lf_sh_a }}</td>
                <td class="w-09 text-right">{{ game.lf_p_a.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.rg_sh_a }}</td>
                <td class="w-09 text-right">{{ game.rg_p_a.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.bl_sh_a }}</td>
                <td class="w-09 text-right">{{ game.bl_p_a.toFixed(1) }} %</td>
            </tr>

            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ shots_total = svc.getFilteredTotal(filtered_game_log, 'opp_shots', game_log) }} ({{ (shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ sl_shots_total = svc.getFilteredTotal(filtered_game_log, 'sl_sh_a', game_log) }} ({{ (sl_shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ sl_shots_pctg_total = ((sl_shots_total / shots_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ lf_shots_total = svc.getFilteredTotal(filtered_game_log, 'lf_sh_a', game_log) }} ({{ (lf_shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ lf_shots_pctg_total = ((lf_shots_total / shots_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ rg_shots_total = svc.getFilteredTotal(filtered_game_log, 'rg_sh_a', game_log) }} ({{ (rg_shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ rg_shots_pctg_total = ((rg_shots_total / shots_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ bl_shots_total = svc.getFilteredTotal(filtered_game_log, 'bl_sh_a', game_log) }} ({{ (bl_shots_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ bl_shots_pctg_total = ((bl_shots_total / shots_total) * 100).toFixed(1) }} %</b></td>
            </tr>
        </tbody>
    </table>

    <table id="shot_on_goal_zones_against" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'shot_on_goal_zones_against'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-08 text-right">{{ game.opp_shots_on_goal }}</td>
                <td class="w-08 text-right">{{ game.sl_og_a }}</td>
                <td class="w-09 text-right">{{ game.sl_og_p_a.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.lf_og_a }}</td>
                <td class="w-09 text-right">{{ game.lf_og_p_a.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.rg_og_a }}</td>
                <td class="w-09 text-right">{{ game.rg_og_p_a.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.bl_og_a }}</td>
                <td class="w-09 text-right">{{ game.bl_og_p_a.toFixed(1) }} %</td>
            </tr>
            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ shots_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'opp_shots_on_goal', game_log) }} ({{ (shots_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ sl_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'sl_og_a', game_log) }} ({{ (sl_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ sl_on_goal_pctg_total = ((sl_on_goal_total / shots_on_goal_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ lf_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'lf_og_a', game_log) }} ({{ (lf_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ lf_on_goal_pctg_total = ((lf_on_goal_total / shots_on_goal_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ rg_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'rg_og_a', game_log) }} ({{ (rg_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ rg_on_goal_pctg_total = ((rg_on_goal_total / shots_on_goal_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ bl_on_goal_total = svc.getFilteredTotal(filtered_game_log, 'bl_og_a', game_log) }} ({{ (bl_on_goal_total / filtered_game_log.length).toFixed(1) }})</b></td>
                <td class="text-right"><b>{{ bl_on_goal_pctg_total = ((bl_on_goal_total / shots_on_goal_total) * 100).toFixed(1) }} %</b></td>
            </tr>
        </tbody>
    </table>

    <table id="score_states" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'score_states'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-10 text-right">{{ svc.formatTime(game.time_played) }}</td>
                <td class="w-10 text-right">{{ svc.formatTime(game.leading) }}</td>
                <td class="w-12 text-right">{{ game.leading_pctg.toFixed(1) }} %</td>
                <td class="w-10 text-right">{{ svc.formatTime(game.trailing) }}</td>
                <td class="w-12 text-right">{{ game.trailing_pctg.toFixed(1) }} %</td>
                <td class="w-10 text-right">{{ svc.formatTime(game.tied) }}</td>
                <td class="w-12 text-right">{{ game.tied_pctg.toFixed(1) }} %</td>
            </tr>
            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ svc.formatTime(time_played_total = svc.getFilteredTotal(filtered_game_log, 'time_played', game_log)) }}</b></td>
                <td class="text-right"><b>{{ svc.formatTime(leading_total = svc.getFilteredTotal(filtered_game_log, 'leading', game_log)) }}</b></td>
                <td class="text-right"><b>{{ ((leading_total / time_played_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ svc.formatTime(trailing_total = svc.getFilteredTotal(filtered_game_log, 'trailing', game_log)) }}</b></td>
                <td class="text-right"><b>{{ ((trailing_total / time_played_total) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ svc.formatTime(tied_total = svc.getFilteredTotal(filtered_game_log, 'tied', game_log)) }}</b></td>
                <td class="text-right"><b>{{ ((tied_total / time_played_total) * 100).toFixed(1) }} %</b></td>
            </tr>
        </tbody>
    </table>

    <table id="shootout_stats" class="table table-responsive-md table-striped table-bordered table-hover table-sm small shadow" data-ng-if="tableSelect == 'shootout_stats'">
        <thead class="thead-light">
            <tr>
                <th scope="col" class="text-center" data-ng-repeat="col in stats_cols[tableSelect]">
                    <a href="" data-ng-click="$parent.statsSortDescending = $parent.setSortOrder(col.data_key, $parent.sortCriterion, $parent.statsSortDescending); $parent.sortCriterion = col.data_key">
                        <abbr title="{{col.expl_de}}" data-ng-if="col.expl_de">{{col.col_header}}</abbr>
                        <span data-ng-if="!col.expl_de">{{col.col_header}}</span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && $parent.statsSortDescending" class="fa fa-caret-down"></span>
                        <span data-ng-show="$parent.sortCriterion == col.data_key && !$parent.statsSortDescending" class="fa fa-caret-up"></span>
                    </a>
                </th>
            </tr>
        </thead>
        <tbody>
            <tr class="{{game.home_road === 'home'? 'table-info' : 'table-warning'}}" data-ng-repeat="game in filtered_game_log = (so_game_log | orderBy:sortCriterion:statsSortDescending | filter: {home_road: homeRoadFilter} | filter:dayFilter | filter:fromRoundFilter | filter:toRoundFilter | filter:weekdayFilter | filter: {opp_team: oppFilter} | filter: {season_type: seasonTypeFilter})">
                <td class="w-07 text-center"><a href="https://www.del.org/spielplan/{{game.game_date}}#schedule">{{ game.game_date }}</a></td>
                <td class="w-07 text-right">{{ game.round }}</td>
                <td class="w-10 {{ svc.setTextColor(game.score, game.opp_score) }}">
                    <b>{{game.score}}:{{game.opp_score}}</b>
                    <a href="https://www.del.org/event/{{game.home_road === 'home'? team_lookup[game.team] : team_lookup[game.opp_team]}}-{{game.home_road === 'home'? team_lookup[game.opp_team] : team_lookup[game.team]}}/{{game.schedule_game_id}}">
                        {{game.home_road === 'home'? 'vs.' : '@'}} {{ game.opp_team }} {{game.game_type === 'SO' ? '(SO)' : game.game_type === 'OT' ? '(VL)' : ''}}
                    </a>
                </td>
                <td class="w-08 text-right">{{ game.so_rounds }}</td>
                <td class="w-08 text-right">{{ game.so_a }}</td>
                <td class="w-08 text-right">{{ game.so_g }}</td>
                <td class="w-08 text-right">{{ game.so_pctg.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.opp_so_a }}</td>
                <td class="w-08 text-right">{{ game.opp_so_g }}</td>
                <td class="w-08 text-right">{{ game.so_sv_pctg.toFixed(1) }} %</td>
                <td class="w-08 text-right">{{ game.sw }}</td>
                <td class="w-08 text-right">{{ game.sl }}</td>
            </tr>
            <tr class="table-secondary">
                <td></td>
                <td>Gesamt:</td>
                <td class="text-right"><b>{{ filtered_game_log.length }} Spiel{{ filtered_game_log.length == 1 ? '' : 'e'}}</b></td>
                <td class="text-right"><b>{{ svc.getFilteredTotal(filtered_game_log, 'so_rounds', so_game_log) }}</b></td>
                <td class="text-right"><b>{{ totalShoAttempts = svc.getFilteredTotal(filtered_game_log, 'so_a', so_game_log) }}</b></td>
                <td class="text-right"><b>{{ totalShoGoals = svc.getFilteredTotal(filtered_game_log, 'so_g', so_game_log) }}</b></td>
                <td class="text-right"><b>{{ ((totalShoGoals / totalShoAttempts) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ oppTotalShoAttempts = svc.getFilteredTotal(filtered_game_log, 'opp_so_a', so_game_log) }}</b></td>
                <td class="text-right"><b>{{ oppTotalShoGoals = svc.getFilteredTotal(filtered_game_log, 'opp_so_g', so_game_log) }}</b></td>
                <td class="text-right"><b>{{ ((1 - oppTotalShoGoals / oppTotalShoAttempts) * 100).toFixed(1) }} %</b></td>
                <td class="text-right"><b>{{ svc.getFilteredTotal(filtered_game_log, 'sw', so_game_log) }}</b></td>
                <td class="text-right"><b>{{ svc.getFilteredTotal(filtered_game_log, 'sl', so_game_log) }}</b></td>
            </tr>
        </tbody>
    </table>

</div>